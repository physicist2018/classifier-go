# Аэрозольный классификатор

Программа для классификации типов аэрозолей на основе данных флуоресценции и деполяризации.

## Описание

Программа анализирует входные матрицы данных:
- Матрица флуоресцентной емкости (`FL_cap.txt`)
- Матрица деполяризации (`Dep.txt`)

На выходе генерируются:
- Матрицы концентраций для трех типов аэрозолей (городские, пылевые, сажевые)
- Матрицы параметров Gf и δ для каждого типа
- Тепловые карты распределений
- Оптимальные параметры модели

## Требования

- Go 1.18+
- Установленные зависимости:
  ```bash
  go get gonum.org/v1/gonum
  go get gonum.org/v1/gonum/mat
  go get gonum.org/v1/gonum/floats
  go get gonum.org/v1/gonum/optimize
  ```

## Установка

1. Клонируйте репозиторий:
   ```bash
   git clone git@github.com:physicist2018/classifier-go.git
   cd classifier-go/cmd/classifier
   ```

2. Соберите проект:
   ```bash
   go build -o classifier
   ```

## Использование

1. Подготовьте конфигурационный файл `config.yaml` (пример ниже)
2. Поместите входные файлы `FL_cap.txt` и `Dep.txt` в указанную в конфиге директорию
3. Запустите программу:
   ```bash
   ./classifier
   ```

### Пример config.yaml

```yaml
input_dir: "./data/"
sigma_t: 1.0
sigma_h: 1.0
size: 5
do_smooth: true
num_points: 1000
variation_coefficient: 0.1
gf_urban: 1.0e-3
gf_dust: 1.0e-4
gf_soot: 1.0e-5
delta_urban: 0.3
delta_dust: 0.4
delta_soot: 0.1
```

## Выходные данные

Программа создает в указанной директории следующие файлы:

- Матрицы концентраций:
  - `Eta_u.csv` - городские аэрозоли
  - `Eta_d.csv` - пылевые аэрозоли
  - `Eta_s.csv` - сажевые аэрозоли

- Матрицы параметров:
  - `Gf_u.csv`, `Gf_d.csv`, `Gf_s.csv`
  - `Delta_u.csv`, `Delta_d.csv`, `Delta_s.csv`

- Визуализации:
  - `Dep.pdf` - тепловая карта деполяризации
  - `Eta_*.pdf` - тепловые карты концентраций

- Файл сгенерированных параметров:
  - `rand.csv`

## Алгоритм работы

1. Загрузка и предварительная обработка данных
2. Генерация распределений параметров с помощью нормального распределения
3. Параллельная классификация точек данных с оптимизацией методом Нелдера-Мида
4. Усреднение результатов по лучшим решениям
5. Сохранение результатов и визуализация

## Настройка параметров

Основные параметры для настройки в `config.yaml`:

- `sigma_t`, `sigma_h` - параметры сглаживания Гауссовым фильтром
- `size` - размер ядра сглаживания
- `num_points` - количество точек в распределениях параметров
- `variation_coefficient` - коэффициент вариации параметров
- `gf_*`, `delta_*` - реперные значения параметров для разных типов аэрозолей

## Лицензия

Проект распространяется под лицензией MIT.
